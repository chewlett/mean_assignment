<%- layout('layout') %>
<div>
    <h3><%- title %></h3>
    <form class="form" method="post" action="/edit">
        <input type="hidden" name="_id" value="<%- data._id %>" />
        <input type="hidden" name="creation_date" value="<%- data.creation_date %>" />
        <div class="form-group">
            <label for="activity">Activity</label>
            <select id="activity" name="activity">
                <option></option>
                <% for (var i = 0; i < activities.length; i++) { %>
                    <% if (data.activity == activities[i].description) { %>
                    <option selected="selected" value="<%- activities[i].description %>"><%- activities[i].description %></option>
                    <% } else { %>
                    <option value="<%- activities[i].description %>"><%- activities[i].description %></option>
                    <% } %>
                <% } %>
            </select>
        </div>
        <div class="form-group">
            <h4>Date</h4>
            <label for="day">Day</label>         
            <select id="day" name="day">            
                <option></option>                
            <% for (var i = 1; i <= 31; i++) { %>
                <% if (i == data.activity_start.getDate()) { %>
                    <% if (i < 10) { %>                
                    <option selected="selected">0<%- i %></option>
                    <% } else { %>
                    <option selected="selected"><%- i %></option>
                <% }} else { %>
                    <% if (i < 10) { %>                
                    <option>0<%- i %></option>
                    <% } else { %>
                    <option><%- i %></option>
            <% }}} %>
            </select>
            <label for="month">Month</label>
            <select id="month" name="month">
                <option></option>
            <% for (var i = 1; i <= 12; i++) { %>
                <% if (i == data.activity_start.getMonth()+1) { %>
                    <% if (i < 10) { %>                
                    <option selected="selected">0<%- i %></option>
                    <% } else { %>
                    <option selected="selected"><%- i %></option>
                <% }} else { %>
                    <% if (i < 10) { %>                
                    <option>0<%- i %></option>
                    <% } else { %>
                    <option><%- i %></option>
            <% }}} %>
            </select>
            <label for="year">Year</label>            
            <select id="year" name="year">
                <option></option> 
            <% var currentYear = (new Date().getYear()) + 1900
            for (var i = currentYear; i <= (currentYear + 5); i++) { %>                                                                                               
                    <% if (i == data.activity_start.getYear()+1900) { %>              
                    <option selected="selected"><%- i %></option>
                    <% } else { %>
                    <option><%- i %></option>
            <% }} %>
            </select>
        </div>
        <div class="form-group">
            <h4>Start Time</h4>
            <label for="startHour">hh</label>
            <select id="startHour" name="startHour">
                <option></option>
            <% for (var i = 0; i <= 23; i++) { %>
                <% if (data.activity_start.getHours() == i) { %>
                    <% if (i < 10) { %>                
                    <option selected="selected">0<%- i %></option>
                    <% } else { %>
                    <option selected="selected"><%- i %></option>                
                <% }} else { %>
                    <% if (i < 10) { %>                
                    <option>0<%- i %></option>
                    <% } else { %>
                    <option><%- i %></option>                
            <% }}} %>
            </select>
            <span> : </span>
            <label for="startMinutes">mm</label>
            <select id="startMinutes" name="startMinutes">
            <% for (let i = 0; i <= 45; i += 15) { 
               if (i == data.activity_start.getMinutes()) { 
                   if (i == 0) { %>
                        <option selected="selected">0<%- i%></option>
                    <% } else { %>
                        <option selected="selected"><%- i%></option>                    
               <% }} else { 
                   if (i == 0) { %>
                        <option>0<%- i%></option>
                    <% } else { %>
                        <option><%- i%></option>
            <% }}} %>
            </select>
        </div>
        <div class="form-group">
            <h4>End Time</h4>
            <label for="endHour">hh</label>
            <select id="endHour" name="endHour">
                <option></option>
            <% for (var i = 1; i <= 24; i++) { %>
                <% if (data.activity_end.getHours() == i) { %>
                    <% if (i < 10) { %>                
                    <option selected="selected">0<%- i %></option>
                    <% } else { %>
                    <option selected="selected"><%- i %></option>                
                <% }} else { %>
                    <% if (i < 10) { %>                
                    <option>0<%- i %></option>
                    <% } else { %>
                    <option><%- i %></option>   
            <% }}} %>
            </select>
            <span> : </span>
            <label for="endMinutes">mm</label>
            <select id="endMinutes" name="endMinutes">
            <% for (let i = 0; i <= 45; i += 15) { 
               if (i == data.activity_end.getMinutes()) { 
                   if (i == 0) { %>
                        <option selected="selected">0<%- i%></option>
                    <% } else { %>
                        <option selected="selected"><%- i%></option>                    
               <% }} else { 
                   if (i == 0) { %>
                        <option>0<%- i%></option>
                    <% } else { %>
                        <option><%- i%></option>
            <% }}} %>
            </select>
        </div>
        <div class="form=group">
            <label for="active">Active?</label>
            <% if (data.is_active) { %>
                <input checked="checked" type="checkbox" id="active" name="active" />
            <% } else { %>
                <input type="checkbox" id="active" name="active" />
            <% } %>
        </div>
        <input type="submit" value="Update Activity" class="btn btn-success" />
        <a href="/" class="btn btn-success">Cancel</a>
    </form>
</div>